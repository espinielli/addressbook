<!DOCTYPE html>
<html>
<head>
<title>Indirizzario</title>
<meta http-equiv="content-type" content="text/html; charset=UTF-8">
<script src="d3.v2.js" type="text/javascript"></script>
<script type="text/javascript">
var input_date_format  = d3.time.format("%m/%d/%Y");
var output_date_format = d3.time.format("%d/%m/%Y");

function draw(data) {
    "use strict";
    // badass visualization code goes here

    // group by surname
    //        var families = d3.nest()
    //          .key(function(d) {return d.familyname;})
    //          .sortKeys(d3.ascending)
    //          .key(function(d) {return d.givenname;})
    //          .sortKeys(d3.ascending)
    //          .entries(data);

    d3.select("body")
	.append("div")
	.attr("class", "addressbook")
	.selectAll(".family")
	.data(data)
	.enter()
	.append("div")
	.attr("class", "family")
	.append("p")
	.attr("class", "name")
	.text(function(d) {return d.familyname + " " + d.givenname;});
    //        var details = d3.selectAll("div.family")
    //          .append("div")
    //            .attr("class", "details");
    //        details.append("p")
    //          .attr("class", "birthday")
    //          .text(function(d) {
    //             return output_date_format(new Date(input_date_format.parse(d.birthday)));});
    //          .append("p")
    //            .attr("class", "homephone")
    //            .text(function(d) {return d.homephone;});

    //        var parents = details.append("div").attr("class", "parents");
    //        var homeaddress = details.append("div").attr("class", "homeaddress");
      }
</script>
</head>
<body>
<script type="text/javascript">
d3.json("contacts.json", draw);
</script>
</body>
</html>
